# GalaxyCo.ai Development Standards

## üìñ Context Files (READ FIRST)

**Universal Context:**
- `../devops-hq/.cursor/master-context.md` - Partnership protocol, AI philosophy, your preferences
- `../devops-hq/.cursor/universal-patterns.md` - Cross-project learnings

**Project Context:**
- `.cursor/context.md` - GalaxyCo vision and current state
- `.cursor/galaxyco-rules.md` - Detailed development standards
- `.cursor/component-guide.md` - Component implementations
- `.cursor/current-sprint.md` - Active work this sprint

---

## üéØ Quick Reference (GalaxyCo Standards)

### Core Principles
- TypeScript strict; avoid 'any' unless justified
- Validate external input with Zod
- Natural language should drive everything
- Visual feedback mandatory for all actions
- Simple UI/UX without sacrificing power

### Architecture
- apps/web: Next.js 15 App Router; Server Components by default; Server Actions for mutations
- apps/api: NestJS backend
- Styling: Tailwind + shadcn/ui + Kibo UI (advanced components)
- Tests: Vitest; test behavior, not implementation
- Monorepo: run via turbo; shared code in packages/*
- Database: Neon Postgres (NOT Supabase) + Pinecone for vectors
- Auth: Clerk

### Component Structure
- Import from @/components/ui for shadcn
- Import from @/components/kibo for Kibo UI
- Custom Galaxy components in @/components/galaxy
- All components must have loading states
- Use React Hook Form + Zod for forms

### AI Integration
- OpenAI GPT-4 for main reasoning
- Claude for complex analysis
- OpenAI Embeddings (text-embedding-3-small)
- Pinecone for vector storage (org namespaces)

### State Management
- Zustand for global client state
- React Query for server state
- Local state with useState
- No Redux

### Quality
- Pre-commit: code must format & lint; no stray console.log (warn-only allowed during dev)
- Every async function needs try-catch
- User-friendly error messages (never show technical errors)
- Multi-tenant isolation (ALWAYS filter by orgId)

### Git Conventions
- Conventional commits: `feat(scope): message`
- Scopes: api, web, db, infra, agents, flows, companion
- Branch naming: `feature/[task-name]`

---

## üîß GitKraken CLI Integration
- Use `gk ai commit --add-description` for AI-generated commits
- Use `gk work start "<feature>"` to create feature branches
- Use `gk work pr create` for AI-generated PR descriptions

---

## ü§ñ MCP Servers
- **GitKraken** - Git operations, GitHub API (see docs/devtools/gitkraken-cli.md)
- **Kibo UI** - 1,101 component patterns (see .cursor/mcp.json)
- **Filesystem** - Enhanced file operations
- **Memory** - Persistent knowledge across sessions

---

## üéØ Cursor 2.0 Features

### Agent Interface
- **Use Agent for:** Complex multi-file tasks, new feature creation, refactoring
- **Delegate to Agent:** Test creation, documentation, repetitive tasks
- **Always provide:** Clear context, specific requirements, GalaxyCo patterns to follow
- **Review before accepting:** All Agent suggestions, especially for critical code

### Tab Autocomplete
- **Trust Tab for:** Common patterns, boilerplate, import statements, component structures
- **Tab learns from:** Your codebase, established patterns, frequent code structures
- **Press Tab confidently** when suggestion matches intent
- **Press Esc** to dismiss unwanted suggestions

### Inline Edit (Cmd+K / Ctrl+K)
- **Use for:** Quick refactoring, adding error handling, type additions, renaming in scope
- **Best for:** Single-file changes, small modifications, code improvements
- **Provide clear instructions** in natural language
- **Review changes** before accepting

### Bugbot
- **Automatically detects:** TypeScript errors, linting issues, common bugs, performance problems
- **One-click fixes** for common issues
- **Review before applying** automated fixes
- **Use Bugbot** before committing code

### Scoped Changes
- **Use for:** Large refactoring, multi-file updates, architecture changes
- **Specify scope boundaries** clearly (files, directories, patterns)
- **Review all changes** before applying
- **Test thoroughly** after scoped changes

---

## üß† Project Memories (Cursor AI Context)

### GalaxyCo Architecture Patterns
- **Server Components by default** - Use Client Components only when needed (useState, useEffect, event handlers)
- **Server Actions for mutations** - NOT API routes (use Server Actions for form submissions, data updates)
- **Multi-tenant isolation** - ALWAYS filter by orgId in database queries (NO exceptions)
- **Try-catch everywhere** - Every async function needs error handling
- **User-friendly errors** - Never show technical errors to users (transform to friendly messages)

### Component Patterns
- **Loading states mandatory** - Every component must show loading state during async operations
- **Form validation** - Always use React Hook Form + Zod (never manual validation)
- **Styling hierarchy** - Tailwind (utility) ‚Üí shadcn/ui (base) ‚Üí Kibo UI (advanced) ‚Üí Galaxy components (custom)
- **Import paths** - @/components/ui (shadcn), @/components/kibo (Kibo UI), @/components/galaxy (custom)

### State Management Rules
- **Global client state** - Use Zustand (never Redux)
- **Server state** - Use React Query (for data fetching, caching)
- **Local state** - Use useState (for simple component state)
- **Form state** - Use React Hook Form (never manual form state)

### Database Patterns
- **ORM** - Drizzle ORM (strongly typed queries)
- **Database** - Neon Postgres (NOT Supabase)
- **Migrations** - Always generate migrations (never manual schema changes)
- **Queries** - ALWAYS include orgId filter (multi-tenant isolation)
- **Vector storage** - Pinecone with org namespaces

### AI Integration Patterns
- **Main reasoning** - OpenAI GPT-4 (for chat, assistance, generation)
- **Complex analysis** - Claude (for deep analysis, reasoning)
- **Embeddings** - OpenAI text-embedding-3-small (for vector search)
- **Vector storage** - Pinecone with org-based namespaces

### Common Gotchas to Avoid
- ‚ùå **Forgetting orgId filter** in database queries (causes data leakage)
- ‚ùå **Using API routes** instead of Server Actions (increases complexity)
- ‚ùå **Missing loading states** (poor UX)
- ‚ùå **Showing technical errors** to users (breaks trust)
- ‚ùå **Using 'any' type** without justification (reduces type safety)
- ‚ùå **Mixing Client and Server Components** incorrectly (causes hydration errors)
- ‚ùå **Manual form validation** instead of Zod (maintenance burden)

### UI/UX Principles
- **Natural language first** - Everything should be describable in natural language
- **Visual feedback mandatory** - No silent failures, show all actions visually
- **Simple without sacrificing power** - Clean UI that hides complexity but keeps power accessible
- **Non-technical users succeed** - 95% success rate for non-technical users
- **Linear aesthetic** - Minimal, clean, professional (like Linear app)

---

**For detailed standards, read `.cursor/galaxyco-rules.md`**
**For partnership protocol, read `../devops-hq/.cursor/master-context.md`**
**For Cursor 2.0 features, read `.cursor/docs/CURSOR-2.0-QUICK-START.md`**

